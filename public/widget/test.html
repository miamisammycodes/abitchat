<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Widget Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #1f2937;
        }
        .card {
            background: white;
            padding: 24px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .card h2 {
            margin-top: 0;
            color: #374151;
        }
        code {
            background: #f3f4f6;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 14px;
        }
        pre {
            background: #1f2937;
            color: #e5e7eb;
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
        }
        pre code {
            background: transparent;
            padding: 0;
        }
        .highlight {
            color: #fbbf24;
        }
        .note {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 12px 16px;
            margin: 16px 0;
            border-radius: 0 4px 4px 0;
        }
    </style>
</head>
<body>
    <h1>Chatbot Widget Test Page</h1>

    <div class="card">
        <h2>About This Page</h2>
        <p>This page demonstrates the embeddable chatbot widget. Look at the bottom-right corner to see the chat launcher button.</p>
        <p>Click the button to open the chat and start a conversation!</p>
    </div>

    <div class="card">
        <h2>Embed Code</h2>
        <p>To add this chatbot to your website, add the following code before the closing <code>&lt;/body&gt;</code> tag:</p>
        <pre><code>&lt;script
    src="http://localhost:8000/widget/chatbot.js"
    data-chatbot-key="<span class="highlight">YOUR_API_KEY</span>"
    data-chatbot-url="http://localhost:8000"
    data-chatbot-position="bottom-right"
    data-chatbot-color="#4F46E5"&gt;
&lt;/script&gt;</code></pre>

        <div class="note">
            <strong>Note:</strong> Replace <code>YOUR_API_KEY</code> with your actual API key from the dashboard.
        </div>
    </div>

    <div class="card">
        <h2>Configuration Options</h2>
        <ul>
            <li><code>data-chatbot-key</code> - Your API key (required)</li>
            <li><code>data-chatbot-url</code> - Base URL of the chatbot API</li>
            <li><code>data-chatbot-position</code> - Widget position: "bottom-right" or "bottom-left"</li>
            <li><code>data-chatbot-color</code> - Primary color (hex code)</li>
        </ul>
    </div>

    <div class="card">
        <h2>Sample Content</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p>
        <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident.</p>
    </div>

    <div class="card">
        <h2>Test the Widget</h2>
        <p>Enter an API key to test the widget:</p>
        <div style="display: flex; gap: 8px; margin-top: 12px;">
            <input type="text" id="apiKeyInput" placeholder="Paste your API key here..." style="flex: 1; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 6px;">
            <button onclick="loadWidget()" style="padding: 10px 20px; background: #4F46E5; color: white; border: none; border-radius: 6px; cursor: pointer;">Load Widget</button>
        </div>
        <div id="testStatus" style="margin-top: 12px; padding: 12px; border-radius: 6px; display: none;"></div>
    </div>

    <!-- Chatbot Widget will be loaded dynamically -->
    <script src="./chatbot.js"></script>
    <script>
        function loadWidget() {
            const apiKey = document.getElementById('apiKeyInput').value.trim();
            const statusEl = document.getElementById('testStatus');

            if (!apiKey) {
                statusEl.style.display = 'block';
                statusEl.style.background = '#fee2e2';
                statusEl.style.color = '#991b1b';
                statusEl.textContent = 'Please enter an API key';
                return;
            }

            // Remove existing widget if any
            const existingLauncher = document.querySelector('.chatbot-launcher');
            const existingContainer = document.querySelector('.chatbot-container');
            if (existingLauncher) existingLauncher.remove();
            if (existingContainer) existingContainer.remove();

            // Initialize widget
            if (window.ChatbotWidget) {
                window.ChatbotWidget.init({
                    apiKey: apiKey,
                    baseUrl: 'http://localhost:8000',
                    position: 'bottom-right',
                    primaryColor: '#4F46E5'
                });

                statusEl.style.display = 'block';
                statusEl.style.background = '#d1fae5';
                statusEl.style.color = '#065f46';
                statusEl.textContent = 'Widget loaded! Click the chat icon in the bottom-right corner.';
            }
        }
    </script>
</body>
</html>
